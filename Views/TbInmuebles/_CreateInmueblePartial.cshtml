@model Alquileres.Models.TbInmueble

<div class="row">
    <div class="col-md-6 offset-md-3">
        <div class="d-flex align-items-center mb-3">
            <i class="fas fa-house-medical text-primary fs-4 me-2"></i>
            <h4 class="mb-0">Crear Inmueble</h4>
        </div>
        <form id="inmuebleForm" asp-action="Create" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <input type="hidden" asp-for="FkidUsuario" />

            <!-- Select para Propietarios -->
            <div class="form-group">
                <label class="control-label">Propietario</label>
                <select id="busquedaPropietario" class="form-control select2" name="busquedaPropietario" required
                    style="width: 100%">
                    <option></option> <!-- Opción vacía para placeholder -->
                </select>
                <input type="hidden" id="FkidPropietario" name="FkidPropietario" asp-for="FkidPropietario" />
                <span asp-validation-for="FkidPropietario" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Descripción</label>
                <input asp-for="Fdescripcion" class="form-control" placeholder="Descripción del inmueble" />
                <span asp-validation-for="Fdescripcion" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Dirección</label>
                <input asp-for="Fdireccion" class="form-control" placeholder="Dirección del inmueble" />
                <span asp-validation-for="Fdireccion" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label for="Fubicacion" class="form-label">Ubicación (GPS)</label>
                <div class="input-group">
                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal"
                            data-bs-target="#mapModal" aria-label="Seleccionar ubicación en mapa" id="openMapBtn">
                        <i class="fas fa-map-marker-alt"></i> Seleccionar
                    </button>
                    <input type="text" id="Fubicacion" name="Fubicacion" class="form-control"
                           value="0,0"
                           placeholder="Ingrese las coordenadas, por ejemplo: -34.6037, -58.3816" />
                </div>
                <small class="form-text text-muted">Formato: latitud, longitud</small>
                <span asp-validation-for="Fubicacion" class="text-danger"></span>
            </div>


            <div class="form-group">
                <label class="control-label">Precio</label>
                <input asp-for="Fprecio" class="form-control numeric-input" type="text" step="0.01" autocomplete="off"
                    placeholder="Precio del inmueble" />
                <span asp-validation-for="Fprecio" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Moneda</label>
                <select asp-for="FkidMoneda" class="form-control" asp-items="ViewBag.FkidMoneda" required>
                    <option value="">Seleccionar tipo de moneda</option>
                </select>
                <span asp-validation-for="FkidMoneda" class="text-danger"></span>
            </div>

            <div class="form-group-button mt-2">
                <input type="submit" value="Crear" class="btn btn-primary" />
                <!--  <a asp-action="Index" class="btn btn-secondary ml-2">Volver a la Lista</a> -->
            </div>
        </form>
    </div>
</div>

<!-- Modal para seleccionar ubicación -->
<div class="modal fade" id="mapModal" tabindex="-1" aria-labelledby="mapModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mapModalLabel">Ubicación en el Mapa</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <div id="map" class="map-container"></div>
                <p class="mt-2">Visualización de la ubicación ingresada.</p>
                <div><strong>Coordenadas:</strong> <span id="selectedLocation">Ninguna</span></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="closeMap" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")

}
